
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BLUEHELIX BAAS API documentation</title>

    <!-- Google Optimize -->
    <style>.async-hide{opacity:0!important}</style><script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date; h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')}; (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c; })(window,document.documentElement,'async-hide','dataLayer',4000, {'GTM-P56KNPS':true});</script>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-103824880-2','auto');ga('require','GTM-MTNZM2R');</script>
    <!-- End Google Optimize -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P56KNPS');</script>
    <!-- End Google Tag Manager -->

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-1ab8452a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;javascript&quot;,&quot;golang&quot;]">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P56KNPS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <a href="https://docs.cashlink.io">
        <img src="images/logo-9df24636.png" class="logo" alt="Logo" />
      </a>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="golang">golang</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#bluehelix-baas" class="toc-h1 toc-link" data-title="关于 BLUEHELIX BAAS">关于 BLUEHELIX BAAS</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#153042ed9e" class="toc-h2 toc-link" data-title="概述">概述</a>
                  </li>
                  <li>
                    <a href="#c3b3224d14" class="toc-h2 toc-link" data-title="申请方式">申请方式</a>
                  </li>
                  <li>
                    <a href="#ebaf09501a" class="toc-h2 toc-link" data-title="上币申请材料">上币申请材料</a>
                  </li>
                  <li>
                    <a href="#1138396d9a" class="toc-h2 toc-link" data-title="客户端代码示例">客户端代码示例</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API签名认证">API签名认证</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#282d68464d" class="toc-h2 toc-link" data-title="域名">域名</a>
                  </li>
                  <li>
                    <a href="#http" class="toc-h2 toc-link" data-title="HTTP方法">HTTP方法</a>
                  </li>
                  <li>
                    <a href="#timestamp" class="toc-h2 toc-link" data-title="TIMESTAMP">TIMESTAMP</a>
                  </li>
                  <li>
                    <a href="#efd228142a" class="toc-h2 toc-link" data-title="完成示例">完成示例</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#14f70b1746" class="toc-h1 toc-link" data-title="接口列表">接口列表</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#412366bdb1" class="toc-h2 toc-link" data-title="获取剩余地址数量">获取剩余地址数量</a>
                  </li>
                  <li>
                    <a href="#4853ea161a" class="toc-h2 toc-link" data-title="添加充值地址">添加充值地址</a>
                  </li>
                  <li>
                    <a href="#40ef847a16" class="toc-h2 toc-link" data-title="充值到账通知">充值到账通知</a>
                  </li>
                  <li>
                    <a href="#82d9036fa2" class="toc-h2 toc-link" data-title="获取待处理提现请求">获取待处理提现请求</a>
                  </li>
                  <li>
                    <a href="#3366e0610d" class="toc-h2 toc-link" data-title="提现处理完成通知">提现处理完成通知</a>
                  </li>
                  <li>
                    <a href="#2cd707ac6d" class="toc-h2 toc-link" data-title="提现处理失败通知">提现处理失败通知</a>
                  </li>
                  <li>
                    <a href="#679af9d4b3" class="toc-h2 toc-link" data-title="定期对账">定期对账</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#76bb30b1d9" class="toc-h1 toc-link" data-title="返回值列表">返回值列表</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href="en.html">English</a></li>
            <li><a href="index.html">中文</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='bluehelix-baas'>关于 BLUEHELIX BAAS</h1><h2 id='153042ed9e'>概述</h2>
<p>BLUEHELIX BAAS 提供REST风格的API（HTTPS + JSON)，方便BHOP客户自助接入第三方公链。</p>

<p>在请求API接口之前，需要申请APIKEY, 使用ED25519算法生成公私钥对，用户自己保存私钥，公钥在上币申请时进行提交，得到APIKEY。</p>

<aside class="notice">
客户端：全节点运营方
服务端：BAAS
</aside>
<h2 id='c3b3224d14'>申请方式</h2>
<ul>
<li>工单系统</li>
</ul>
<h2 id='ebaf09501a'>上币申请材料</h2>
<table><thead>
<tr>
<th>参数</th>
<th>值</th>
</tr>
</thead><tbody>
<tr>
<td>币种ID</td>
<td>ABC</td>
</tr>
<tr>
<td>所属公链</td>
<td>ABC</td>
</tr>
<tr>
<td>代币精度</td>
<td>8</td>
</tr>
<tr>
<td>代币总量</td>
<td>100亿</td>
</tr>
<tr>
<td>IP地址</td>
<td>100.100.100.100 （用作IP白名单限制）</td>
</tr>
</tbody></table>
<h2 id='1138396d9a'>客户端代码示例</h2>
<p>提供3种编程语言（Python, Golang, Java)的用户端代码供用户使用 <a href="https://github.com/bhexopen/baas">https://github.com/bhexopen/baas/clients</a>。</p>
<h1 id='api'>API签名认证</h1>
<p>签名前准备的数据如下： HTTP_METHOD + | + HTTP_REQUEST_PATH + | + TIMESTAMP + | + PARAMS 连接完成后，对数据进行 ED25519 签名，签名后的 bytes 进行 Hex 编码。</p>
<h2 id='282d68464d'>域名</h2>
<ul>
<li>正式环境：https://baas.bluehelix.com</li>
</ul>
<h2 id='http'>HTTP方法</h2>
<p>GET POST</p>
<h2 id='timestamp'>TIMESTAMP</h2>
<p>访问 API 时的 UNIX EPOCH 时间戳 (精确到毫秒), 过期时间120000ms。</p>
<h2 id='efd228142a'>完成示例</h2><h3 id='post'>POST请求</h3>
<table><thead>
<tr>
<th>METHOD</th>
<th>URL</th>
<th>TIMESTAMP</th>
</tr>
</thead><tbody>
<tr>
<td>POST</td>
<td>https://baas.bluehelix.com/api/v1/test</td>
<td>1580887996488</td>
</tr>
</tbody></table>

<p>参数见右：</p>
<pre class="highlight plaintext"><code>{
  "side": 1,
  "amount": "100.0543",
  "token_id": "ABC",
  "tx_hash":"0x1234567890",
  "block_height": 1000000
}
</code></pre>
<p>在进行签名之前，需要对请求参数，按照key的首字母进行排序，得到如下数据： <code>POST|/api/v1/test|1580887996488|amount=100.0543&amp;block_height=1000000&amp;side=1&amp;token_id=ABC&amp;tx_hash=0x1234567890</code></p>

<p>使用您本地生成的 private_key（私钥），对数据进行ED25519签名，并对签名后的bytes进行 Hex 编码, 得到最终签名signature。</p>

<p>在HTTP请求时，写入header，即可通过校验:</p>

<ul>
<li>BWAAS-API-KEY</li>
<li>BWAAS-API-SIGNATURE</li>
<li>BWAAS-API-TIMESTAMP</li>
</ul>
<h3 id='get'>GET请求</h3>
<table><thead>
<tr>
<th>METHOD</th>
<th>URL</th>
<th>TIMESTAMP</th>
</tr>
</thead><tbody>
<tr>
<td>GET</td>
<td>https://baas.bluehelix.com/api/v1/test?chain=ABC</td>
<td>1580887996488</td>
</tr>
</tbody></table>

<p>在进行签名之前，需要对请求参数，按照key的首字母进行排序，得到如下数据： <code>GET|/api/v1/test?chain=ABC|1580887996488</code></p>

<p>使用您本地生成的 private_key（私钥），对数据进行ED25519签名，并对签名后的bytes进行 Hex 编码, 得到最终签名signature。</p>

<p>在HTTP请求时，写入header，即可通过校验:</p>

<ul>
<li>BWAAS-API-KEY</li>
<li>BWAAS-API-SIGNATURE</li>
<li>BWAAS-API-TIMESTAMP</li>
</ul>
<h1 id='14f70b1746'>接口列表</h1><h2 id='412366bdb1'>获取剩余地址数量</h2>
<blockquote>
<p>获取剩余地址数量</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X GET
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  https://baas.bluehelix.com/api/v1/address/unused/count/
?chain<span class="o">=</span>ABC
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>GET /api/v1/address/unused/count</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>chain</td>
<td>string</td>
<td>是</td>
<td>那个链,使用主网代币</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
<tr>
<td>data</td>
<td>int</td>
<td>剩余地址数量</td>
</tr>
</tbody></table>

<aside class="notice">
检查是否需要重新生成地址时使用，需要定期调用，视新增用户速度决定。建议每小时调用一次。
</aside>
<h2 id='4853ea161a'>添加充值地址</h2>
<blockquote>
<p>添加充值地址</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X POST
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  -- data <span class="s1">'
    {
      "chain":"ABC",
      "addr_list":[
        "addr_111",
        "addr_222"
      ]
    }
  '</span>
  https://baas.bluehelix.com/api/v1/address/add
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>POST /api/v1/address/add</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>chain</td>
<td>string</td>
<td>是</td>
<td>那个链,使用主网代币</td>
</tr>
<tr>
<td>addr_list</td>
<td>[]string</td>
<td>是</td>
<td>地址列表</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
</tbody></table>

<aside class="notice">
当检查到剩余地址小于特定值，比如1000时，重新生成一批地址，并调用此接口添加充值地址，建议每次添加的充值地址不超过100个，
如果需要导入大量地址，可以多次调用此接口。

对于使用memo的公链，客户端可只调用此服务添加一个充值地址即可，由服务端给来分配memo供充值使用。
</aside>
<h2 id='40ef847a16'>充值到账通知</h2>
<blockquote>
<p>充值到账通知</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X POST
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  -- data <span class="s1">'
    {
        "token_id": "ABC",
        "from": "addr1",
        "to": "addr2",
        "memo":"1234",
        "amount": "124.23",
        "tx_hash": "1234",
        "index": "1",
        "block_height": "124",
        "block_time": "1234"
    }
  '</span>
  https://baas.bluehelix.com/api/v1/notify/deposit
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>POST /api/v1/notify/deposit</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>token_id</td>
<td>string</td>
<td>是</td>
<td>币种ID</td>
</tr>
<tr>
<td>from</td>
<td>string</td>
<td>是</td>
<td>从哪个地址转出来</td>
</tr>
<tr>
<td>to</td>
<td>string</td>
<td>是</td>
<td>转给那个地址</td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>可选</td>
<td>memo标识,传值时不能为空</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>是</td>
<td>充值金额</td>
</tr>
<tr>
<td>tx_hash</td>
<td>string</td>
<td>是</td>
<td>交易hash</td>
</tr>
<tr>
<td>index</td>
<td>string</td>
<td>是</td>
<td>该充值所在交易中的位置</td>
</tr>
<tr>
<td>block_height</td>
<td>string</td>
<td>是</td>
<td>区块高度</td>
</tr>
<tr>
<td>block_time</td>
<td>string</td>
<td>是</td>
<td>区块时间（秒）</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
</tbody></table>

<aside class="notice">
amount参数需要去掉多余的0，举例：

正确： 5.12345
错误： 5.12345000

</aside>

<aside class="notice">
当有用户充值时，调用此接口，为保证充值可靠性，充值需要逐笔执行，超过1条的话可以多次调用此接口。

客户端必须保证充币的真实可靠，因客户端通知错误充值带来的损失，由客户端执行者承担。
</aside>
<h2 id='82d9036fa2'>获取待处理提现请求</h2>
<blockquote>
<p>获取待处理提现请求</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X GET
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  https://baas.bluehelix.com/api/v1/withdrawal/orders
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">::[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"token_id"</span><span class="p">:</span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bhexaddr1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"memo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bhexmemo"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.34"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"token_id"</span><span class="p">:</span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bhexaddr1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"memo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bhexmemo"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.34"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>GET /api/v1/withdrawal/orders?chain=ABC</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>chain</td>
<td>string</td>
<td>是</td>
<td>那个链,使用主网代币</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
<tr>
<td>data</td>
<td>[]order</td>
<td>待处理提现订单列表</td>
</tr>
</tbody></table>

<p>order 信息：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>订单id</td>
</tr>
<tr>
<td>token_id</td>
<td>string</td>
<td>提现币种</td>
</tr>
<tr>
<td>to</td>
<td>string</td>
<td>提现给那个地址</td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>memo标记</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>提现金额</td>
</tr>
</tbody></table>

<aside class="notice">
应定期轮询是否有用户提现需求 ，轮询周期建议不大于出块间隔的十分之一。

如出块时间为15s，建议每1s轮询一次，出块时间为15min的话，建议15s轮询一次。

为对账方便，服务端返回提币金额为净提币金额，链处理所需的手续费由客户端管理。

该接口每次最多返回50个未处理订单。
</aside>
<h2 id='3366e0610d'>提现处理完成通知</h2>
<blockquote>
<p>提现处理完成通知</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X POST
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  --data <span class="s1">'
  {
    "order_id": "1234",
    "token_id": "ABC",
    "to": "bhexaddr1",
    "memo": "bhexmemo",
    "amount": "12.34",
    "tx_hash": "0x5f99810a4154379e5b7951419a77250f020be54b78acb9a8747ff8b0ec75769d",
    "block_height": "6581548",
    "block_time": "1540480255"
  }
  '</span>
  https://baas.bluehelix.com/api/v1/notify/withdrawal
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>POST /api/v1/notify/withdrawal</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>是</td>
<td>订单id</td>
</tr>
<tr>
<td>token_id</td>
<td>string</td>
<td>是</td>
<td>提现币种</td>
</tr>
<tr>
<td>to</td>
<td>string</td>
<td>是</td>
<td>提现给那个地址</td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>可选</td>
<td>memo标记</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>是</td>
<td>提现金额</td>
</tr>
<tr>
<td>tx_hash</td>
<td>string</td>
<td>是</td>
<td>交易hash</td>
</tr>
<tr>
<td>block_height</td>
<td>string</td>
<td>是</td>
<td>区块高度</td>
</tr>
<tr>
<td>block_time</td>
<td>string</td>
<td>是</td>
<td>区块时间（秒）</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
</tbody></table>

<aside class="notice">
amount参数需要去掉多余的0，举例：

正确： 5.12345
错误： 5.12345000

</aside>

<aside class="notice">
提币成功（提币交易已被区块链打包并确认执行成功）后调用此接口，为保证提币结果反馈可靠性，每次仅通知一笔提现处理结果。
客服端负责保证提币执行后才调用此接口
</aside>
<h2 id='2cd707ac6d'>提现处理失败通知</h2>
<blockquote>
<p>提现处理失败通知</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X POST
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  --data <span class="s1">'
  {
    "order_id": "1234",
    "token_id": "ABC",
    "reason": "invalid address"
  }
  '</span>
  https://baas.bluehelix.com/api/v1/notify/failed
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>POST /api/v1/notify/failed</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>是</td>
<td>订单id</td>
</tr>
<tr>
<td>token_id</td>
<td>string</td>
<td>是</td>
<td>提现币种</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>是</td>
<td>失败原因</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
</tbody></table>

<aside class="notice">
提币订单无法处理或者处理失败时，调用此接口，该订单会变为无效订单，订单资产会退回给用户。
</aside>
<h2 id='679af9d4b3'>定期对账</h2>
<blockquote>
<p>定期对账</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl
  -X POST
  -H <span class="s2">"BWAAS-API-KEY: 123"</span>
  -H <span class="s2">"BWAAS-API-TIMESTAMP: 1580887996488"</span>
  -H <span class="s2">"BWAAS-API-SIGNATURE: f321da3"</span>
  --data <span class="s1">'
  {
    "token_id": "ABC",
    "total_deposit_amount": "100000.567",
    "total_withdrawal_amount": "10000",
    "last_block_height": "100000"
  }
  '</span>
  https://baas.bluehelix.com/api/v1/asset/verify
</code></pre><pre class="highlight go"><code></code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight javascript tab-javascript"><code></code></pre>
<blockquote>
<p>返回结果：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>HTTP Request：</p>

<p><code>POST /api/v1/asset/verify</code></p>

<p>请求参数：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>token_id</td>
<td>string</td>
<td>是</td>
<td>提现币种</td>
</tr>
<tr>
<td>total_deposit_amount</td>
<td>string</td>
<td>是</td>
<td>总充值金额</td>
</tr>
<tr>
<td>total_withdrawal_amount</td>
<td>string</td>
<td>是</td>
<td>总提现金额</td>
</tr>
<tr>
<td>last_block_height</td>
<td>string</td>
<td>是</td>
<td>对账最高区块高度</td>
</tr>
</tbody></table>

<p>响应结果：</p>

<table><thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>int</td>
<td>详情见返回类型表</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>返回内容；失败时为错误信息</td>
</tr>
</tbody></table>

<aside class="notice">
amount参数需要去掉多余的0，举例：

正确： 5.12345
错误： 5.12345000

</aside>

<aside class="notice">
定期进行资产对账，客服端定期（每小时或者每天进行对账，客户端根据链的出块时间，交易数量合理确定）向服务端反馈特定链上资产的充提情况（截止到asset_info中指定的区块高度）。

如果有未处理完成的提现订单，建议处理完成后进行对账。当服务端发现客户端反馈的资产信息与服务端不一致，将返回错误，并暂停该币种的充值提现。
</aside>
<h1 id='76bb30b1d9'>返回值列表</h1>
<table><thead>
<tr>
<th>返回值</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>10000</td>
<td>SUCCESS</td>
<td>成功</td>
</tr>
<tr>
<td>10001</td>
<td>INVALID_SIGN</td>
<td>无效签名</td>
</tr>
<tr>
<td>10002</td>
<td>INVALID_APIKEY</td>
<td>无效的api_key</td>
</tr>
<tr>
<td>10003</td>
<td>INVALID_CHAIN</td>
<td>无效的chain</td>
</tr>
<tr>
<td>10004</td>
<td>INVALID_TOKEN_ID</td>
<td>无效的token_id</td>
</tr>
<tr>
<td>10005</td>
<td>INVALID_PARAMS</td>
<td>无效的参数</td>
</tr>
<tr>
<td>10006</td>
<td>INVALID_TO_ADDRESS</td>
<td>无效的充币地址</td>
</tr>
<tr>
<td>10007</td>
<td>INVALID_ORDER_ID</td>
<td>无效的订单id</td>
</tr>
<tr>
<td>10008</td>
<td>INVALID_AMOUNT</td>
<td>无效的amount值</td>
</tr>
<tr>
<td>10009</td>
<td>INVALID_DECIMALS</td>
<td>无效的精度</td>
</tr>
<tr>
<td>10010</td>
<td>INVALID_BLOCK_HEIGHT</td>
<td>无效的区块高度</td>
</tr>
<tr>
<td>10011</td>
<td>INVALID_BLOCK_TIME</td>
<td>无效的区块时间</td>
</tr>
<tr>
<td>10012</td>
<td>INVALID_TXHASH</td>
<td>无效的tx_hash</td>
</tr>
<tr>
<td>10013</td>
<td>INVALID_INDEX</td>
<td>无效的交易index</td>
</tr>
<tr>
<td>10014</td>
<td>NETWORK_ERROR</td>
<td>网络错误</td>
</tr>
<tr>
<td>10015</td>
<td>REPEAT_DEPOSIT</td>
<td>重复充值</td>
</tr>
<tr>
<td>10016</td>
<td>ASSET_VERIFY_FAILED</td>
<td>资产校验失败</td>
</tr>
<tr>
<td>10017</td>
<td>DEPOSIT_SUSPENDED</td>
<td>充值暂停</td>
</tr>
<tr>
<td>10018</td>
<td>WITHDRAWAL_SUSPENDED</td>
<td>提现暂停</td>
</tr>
<tr>
<td>10019</td>
<td>TIMESTAMP_EXPIRED</td>
<td>时间戳过期</td>
</tr>
<tr>
<td>10020</td>
<td>MEMO_REQUIRED</td>
<td>需要memo</td>
</tr>
<tr>
<td>10021</td>
<td>NEED_WAIT</td>
<td>通知提现失败时，需要等待队列释放</td>
</tr>
<tr>
<td>10022</td>
<td>INVALID_FROM_ADDRESS</td>
<td>无效的from地址</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="golang">golang</a>
          </div>
      </div>
    </div>
  </body>
</html>
